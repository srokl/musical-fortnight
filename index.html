<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Currently Playing</title>
  </head>
  <body>
    <h1>Now Playing</h1>
    <div id="currentPlaying">Loading...</div>
    			<!-- RCAST.NET - START EMBEDDED PLAYER -->  
			<audio controls="true" preload="none"><source src="https://players.rcast.net/stream/72412" type="audio/mp3">Your browser does not support audio elements.</audio>
			<div style="overflow:hidden; height:0px; width:0px;"><a href="https://www.rcast.net" title="Internet Radio Hosting">RCAST.NET</a></div>
			<!-- RCAST.NET - END EMBEDDED PLAYER -->
						<!-- RCAST.NET - START EMBEDDED PLAYER --> 
			<iframe width="320" height="560" src="https://players.rcast.net/playlist24h/72412" frameborder="0" scrolling="no" allow="autoplay"></iframe> 
			<div style="overflow:hidden; height:0px; width:0px;"><a href="https://www.rcast.net" title="Internet Radio Hosting">RCAST.NET</a></div>
			<!-- RCAST.NET - END EMBEDDED PLAYER -->
			
    
    <script>
      function fetchCurrentlyPlaying() {
        fetch("http://147.185.221.24:48510/status-json.xsl")
          .then(response => response.json())
          .then(data => {
            let currentlyPlaying = "No data available";
            if (data.icestats) {
              let source = data.icestats.source;
              // If multiple mountpoints are available, check each for yp_currently_playing
              if (Array.isArray(source)) {
                for (let mount of source) {
                  if (mount.yp_currently_playing) {
                    currentlyPlaying = mount.yp_currently_playing;
                    break;
                  }
                }
              } else if (typeof source === "object" && source.yp_currently_playing) {
                currentlyPlaying = source.yp_currently_playing;
              }
            }
            document.getElementById("currentPlaying").innerText = currentlyPlaying;
          })
          .catch(error => {
            document.getElementById("currentPlaying").innerText = "Error loading data";
            console.error("Error fetching Icecast status:", error);
          });
      }
      
      // Initial fetch and refresh every 3 seconds (3000ms)
      fetchCurrentlyPlaying();
      setInterval(fetchCurrentlyPlaying, 3000);
    </script>
  </body>
</html>
